<app-header></app-header> 
<section class="property-wizard">
  <div class="container">
<div class="row wizard-box">
  <div class="col-sm-12">
    <div class="wizard-step-container row">
<div class="col-xxl-3 col-lg-4">
  <app-add-property-steps [addPropertyStepsData]="addPropertyStepsData" [activeSteps]="currentStep+1"></app-add-property-steps>
</div>



<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<div class="wizard-form-details col-xxl-9 col-lg-8">
  <div class="theme-card my-3">
<div class="mt-5 mb-5"></div>
<div class="container mt-5">
  <div class="row">
    <div class="col-md-6 offset-md-3">
 
        <h2 >Add Club</h2> 
        <div class="card-body">
          <form (ngSubmit)="onSubmit()">  
            <div *ngIf="currentStep === 0"> 
              <form [formGroup]="clubFormBasic">
                <div class="row mb-3">
                  <div class="col-12">
                    <label for="images" class="form-label fs-5">Club Logo</label>
                    <input type="file" name="images" id="images" class="form-control" (change)="handleFileInput($event)" multiple> 
                  </div>
                </div>
                <div class="mb-3">
                  <label for="name" class="form-label fs-5">Club Name</label>
                  <input type="text" minlength="4" class="form-control" id="name" formControlName="name" [(ngModel)]="club.name" required>
                  <div *ngIf="clubFormBasic.get('name')!.invalid ">
                    <div *ngIf="clubFormBasic.get('name')!.errors?.['required']">Name is required.</div>
                    <div *ngIf="clubFormBasic.get('name')!.errors?.['minlength']">
                      Name must be at least 4 characters long.
                    </div> 
                    
                  </div>
                </div>
              <div class="mb-3">
              <label for="description" class="form-label fs-5">Description</label>
              <textarea  minlength="10" class="form-control" id="description" [(ngModel)]="club.description" formControlName="description" required></textarea> 
              <div
              *ngIf="clubFormBasic.get('description')!.invalid && clubFormBasic.get('description')!.touched || clubFormBasic.get('description')!.dirty"
            class="alert"> 
            <div *ngIf="clubFormBasic.get('description')!.errors?.['required']">description is Required.</div>
            <div *ngIf="clubFormBasic.get('description')!.errors?.['minlength']">
              Description must be at least 10 characters long.
            </div> 
            </div>
            </div>  
            <div class="mb-3">
              <label for="openMembership" class="form-label fs-5">Open Membership</label>
              <select class="form-select" id="openMembership" class="form-control" formControlName="openMembership" [(ngModel)]="club.openMembership"required>
                <option value="" disabled selected>Select option</option>
                <option value="true">Yes</option> 
                <option value="false">No</option>  
              </select> 
            </div>                        

            </form> 
            <button type="button" class="btn btn-orange" (click)="nextStep()" [disabled]="clubFormBasic.invalid">Next</button> 

            </div> 
                <div *ngIf="currentStep === 1"> 
                  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> 
                
                  <div class="row mb-3" >
                    <div class="col-md-4" [formGroup] = "clubFormSocialMedia"> 
                      <label for="facebook" class="form-label fs-5" >
                        <span style="font-family: 'FontAwesome';">&#xf09a;</span> Facebook
                      </label>
                      <input type="text" class="form-control" id="facebook" name="facebook" formControlName="facebookUrl" [(ngModel)]="club.facebookUrl" >  
                      <div *ngIf="clubFormSocialMedia.get('facebookUrl')!.invalid && clubFormSocialMedia!.get('facebookUrl')!.touched" class="alert" class="text-danger">  
                        Please add a valid facebook URL.
                      </div>   
                    </div>
                  </div>
                
                  <div class="col-md-4" [formGroup]="clubFormSocialMedia">
                    <label for="instagram" class="form-label fs-5">
                      <span style="font-family: 'FontAwesome';">&#xf16d;</span> Instagram
                    </label>
                    <input type="text" class="form-control" id="instagram" formControlName="instagramUrl" name="instagram"  [(ngModel)]="club.instagramUrl">
                    <div *ngIf="clubFormSocialMedia.get('instagramUrl')!.invalid && (clubFormSocialMedia.get('instagramUrl')!.touched || clubFormSocialMedia.get('instagramUrl')!.dirty)" class="text-danger">
                      <div *ngIf="clubFormSocialMedia.get('instagramUrl')!.errors" class="alert"> 
                        Please add a valid Instagram URL.
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4" [formGroup]="clubFormSocialMedia" >
                    <label  for="twitter" class="form-label fs-5">
                      <span style="font-family: 'FontAwesome';">&#xf099;</span> Twitter
                    </label>
                    <input type="text" class="form-control" id="twitter" name="twitter" formControlName="twitterUrl" [(ngModel)]="club.twitterUrl">  
                    <div *ngIf="clubFormSocialMedia.get('twitterUrl')!.invalid && (clubFormSocialMedia.get('twitterUrl')!.touched || clubFormSocialMedia.get('twitterUrl')!.dirty)" class="text-danger">
                      <div *ngIf="clubFormSocialMedia.get('twitterUrl')!.errors" class="alert"> 
                        Please add a valid twitter URL.
                      </div>
                    </div>

                  </div>                  
                
                  <div class="col-md-4" [formGroup]="clubFormSocialMedia">
                    <label for="linkedin" class="form-label fs-5">
                      <span style="font-family: 'FontAwesome';">&#xf08c;</span> LinkedIn
                    </label>
                    <input type="text" class="form-control" id="linkedin" name="linkedin" formControlName = "linkedinUrl" [(ngModel)]="club.linkedinUrl"> 
                    <div *ngIf="clubFormSocialMedia.get('linkedinUrl')!.invalid && (clubFormSocialMedia.get('linkedinUrl')!.touched || clubFormSocialMedia.get('linkedinUrl')!.dirty)" class="text-danger">
                      <div *ngIf="clubFormSocialMedia.get('linkedinUrl')!.errors" class="alert"> 
                        Please add a valid linkedin URL.
                      </div>
                    </div>

                  </div>  
                  <div class="card-body d-flex justify-content-between">
                    <button type="button" class="btn btn-orange" (click)="previousStep()">Previous</button>
                    <button type="button" class="btn btn-orange" (click)="nextStep()" [disabled]="!clubFormSocialMedia.valid">Next</button>
                  </div>
                                  
                  <div class="mt-5"></div>  
                </div> 
                              
              <div *ngIf="currentStep === 2">

                <div *ngFor="let member of club.clubMemberShip; let i = index" class="row mb-2" >
                  <div class="mb-3">
                    <div class="col-md-6">
                      <input type="email" class="form-control" name="member.email{{i}}" [(ngModel)]="member.email" placeholder="Email" (change)="handleEmailVerification(member.email, i)"> 
                    </div>    
                    <div class="mt-5"></div>  
                
                    <div class="col-md-3">
                      <input *ngIf="emailExists[i]" type="text" disabled=true class="form-control" name="member.firstName{{i}}" [(ngModel)]="member.member.firstName" placeholder="First Name"> 
                      
                    </div> 
                    <div class="mt-5"></div>   
                    
                
                    <div class="col-md-3">
                      <input *ngIf="emailExists[i]" type="text" disabled=true class="form-control" name="member.lastName{{i}}" [(ngModel)]="member.member.lastName" placeholder="Last Name">
                    </div> 
                    <div class="mt-5"></div>  
                
                    <div class="col-md-6">
                      <mat-form-field>
                        <input type="text" matInput [matAutocomplete]="auto" [(ngModel)]="member.position" name="member.position{{i}}" placeholder="Position">
                        <mat-autocomplete #auto="matAutocomplete">
                          <mat-option *ngFor="let option of positionOptions" [value]="option">
                            {{ option }}
                          </mat-option>
                        </mat-autocomplete>
                      </mat-form-field>
                    </div> 
                    <div class="col-md-3" *ngIf="emailExists[i]">
                      <button type="button" class="btn btn-danger" (click)="deleteMember(i)">Delete</button>
                    </div>              
                  </div> 
                  <div class="col-md-12">
                    <small *ngIf="!emailExists[i]" class="text-danger">User with this email does not exist</small>
                  </div>
                </div>
               <div class="d-flex justify-content-center">
                    <button type="button" class="btn btn-orange"  (click)="addMember()">Add Member</button>
                  </div> 
                  <div class="card-body d-flex justify-content-between"> 
        
        
                    <button type="button" class="btn btn-orange" (click)="previousStep()">Previous</button>
                    <button type="button" class="btn btn-orange" (click)="nextStep()" [disabled]="!clubFormSocialMedia.valid">Next</button>
                  </div>

                  </div>  
                  
              
            <div class="card-body d-flex justify-content-between" *ngIf="currentStep === steps.length - 1" >   
            <button  type="submit" class="btn btn-orange w-100">Submit</button>    

              <button type="button" class="btn btn-orange" (click)="previousStep()">Previous</button>
                    </div>
            
            <div class="d-flex justify-content-between">
            </div>

            
            <!-- Notice for Club President Registration -->
            <div class="mt-3 text-muted text-center" *ngIf="currentStep === steps.length - 1">
              <small>By submitting this form, you will be registered as the club president.</small> 
            </div>
          </form>
        </div>
     
    </div>
  </div>
</div> 
  </div></div>
    </div></div></div>   </div></section>



<div class="mt-5 mb-5"></div>  


<app-footor></app-footor>
